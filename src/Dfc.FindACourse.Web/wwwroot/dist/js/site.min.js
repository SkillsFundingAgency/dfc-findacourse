"use strict";!function(){var a={init:function(e){var i=$.extend({startState:"close",openStateClass:"accordion--state-open",closeStateClass:"accordion--state-close",speed:"slow",open:function(){},close:function(){},done:function(){}},$.fn.accordion.defaults,e);return $(this).each(function(){var t=$(this),e=t.children(".accordion-header"),n=e.next(".accordion-panel");if(t.removeClass([i.openStateClass,i.closeStateClass]),a.getIsPostBack(t[0]))"open"===i.startState?t.addClass(i.openStateClass):"close"===i.startState&&t.addClass(i.closeStateClass);else{var o=a.getStateCssClass(t[0],i);t.addClass(o)}e.on("click",function(){n.slideToggle(i.speed,function(){var e=a.getToggleState(t[0],i);t.removeClass(e.removeCssClass),t.addClass(e.addCssClass),"open"===e.currentState?$.isFunction(i.open)&&i.open.call(this,t[0]):"close"===e.currentState&&$.isFunction(i.close)&&i.open.call(this,t[0]),$.isFunction(i.done)&&i.done.call(this,t[0])})})})},getIsPostBack:function(e){var t=$(e).attr("id"),n=window.sessionStorage.getItem(t+"::isPostBack")||null;return n=null===n,a.setIsPostBack(e,n),n},setIsPostBack:function(e,t){var n=$(e).attr("id");window.sessionStorage.setItem(n+"::isPostBack",t)},getStateCssClass:function(e,t){var n=$(e).attr("id"),o=window.sessionStorage.getItem(n+"::stateCssClass")||null;return null===o&&("open"===t.startState?o=t.openStateClass:"close"===t.startState&&(o=t.closeStateClass),a.setStateCssClass(e,o)),o},setStateCssClass:function(e,t){var n=$(e).attr("id");window.sessionStorage.setItem(n+"::stateCssClass",t)},getToggleState:function(e,t){return a.getStateCssClass(e,t)===t.openStateClass?(a.setStateCssClass(e,t.closeStateClass),{currentState:"close",previousState:"open",removeCssClass:t.openStateClass,addCssClass:t.closeStateClass}):(a.setStateCssClass(e,t.openStateClass),{currentState:"open",previousState:"close",removeCssClass:t.closeStateClass,addCssClass:t.openStateClass})}};$.fn.accordion=function(e){if("object"!=typeof e&&e){if($.isFunction(a[e]))return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else a.init.apply(this,arguments)}}(),$(function(){var i=function(e){var t=$("#SubjectKeyword").val();$("#SubjectKeyword").focus().val("").val(t);var n=$("#course-list"),o=n.find("li.item-hover"),i=n.innerHeight(),a=n.scrollTop(),s=o.outerHeight(!0),r=o.index()+1;"down"===e&&(i<r*s&&n.scrollTop(a+s),s||n.scrollTop(0)),"up"===e&&(n.scrollTop(a-s),s||(n.scrollTop(n[0].scrollHeight),o.removeClass("item-hover"),n.find("li:last-child").addClass("item-hover"))),l()};$("#SubjectKeyword").on("keyup",function(e){var s,t,n,o=e.keyCode||e.which;38!==o&&40!==o&&($("#course-list li").each(function(){$(this).remove()}),13!==o&&(s=$(this).val(),$.ajax({type:"GET",url:"/coursedirectory/autocomplete",contentType:"application/json; charset=utf-8",dataType:"json",data:{parm:s},success:function(e){$.each(e,function(e,t){var n=t.toLowerCase(),o=t.toUpperCase(),i="<strong>"+s.toUpperCase()+"</strong>",a="";a=-1<n.indexOf(s.toLowerCase())?o.replace(s.toUpperCase(),i):o,$("#course-list").append($("<li>",{"data-value":t,html:a}))}),0<$("#course-list").children("li").length?$("#course-list").show():$("#course-list").hide()},failure:function(e){console.log(e.responseText)},error:function(e){console.log(e.responseText)}})),13===o&&$("#course-list").trigger("click")),38!==o&&40!==o||(t=o,n=$("#course-list li.item-hover"),38===t&&n.length&&(n.removeClass("item-hover"),n.prev()&&n.prev().addClass("item-hover"),i("up")),40===t&&(n.length?(n.removeClass("item-hover"),n.next()&&n.next().addClass("item-hover")):$("#course-list li").first().addClass("item-hover"),i("down")))}),$("#SubjectKeyword").on("keydown",function(e){var t=e.keyCode||e.which;13===t&&$("#course-list").is(":visible")&&(e.preventDefault(),$("#Search").focus().click()),9===t&&$("#course-list").hide()}),$("#Search").on("click",function(){sessionStorage.setItem("subjectkeyword",$("#SubjectKeyword").val()),sessionStorage.setItem("quallevel",$("#QualificationLevels").val()),sessionStorage.setItem("locationradius",$("#LocationRadius").val()),sessionStorage.setItem("locationpostcode",$("#Location").val())}),$("#SubjectKeyword").on("click",function(){$("#course-list").hide()}),$(document).on("click",function(){$("#course-list").hide()}),$("#course-list").on("click",function(){l(),$(this).hide(),$("#SubjectKeyword").focus()});var l=function(){var e=$("#course-list li:hover").attr("data-value"),t=$("#course-list li.item-hover").attr("data-value");t?($("#SubjectKeyword").val(t),sessionStorage.setItem("subjectkeyword",t)):e&&($("#SubjectKeyword").val(e),sessionStorage.setItem("subjectkeyword",e)),$("#hidSubjectKeyword").val($("#SubjectKeyword").val())}}),$.fn.clearAllFilters=function(e){var n=$.extend({filters:[],defaultFilters:[],done:function(){}},$.fn.clearAllFilters.defaults,e);return $(this).each(function(){if($.isArray(n.filters)&&0<n.filters.length){var t=$(this);t.on("click",function(e){e.preventDefault(),$(n.filters).each(function(e){var t=$(n.filters[e]);(t.is(":checkbox")||t.is(":radio"))&&t.prop("checked",""),$.isArray(n.defaultFilters)&&0<n.defaultFilters.length&&$(n.defaultFilters).each(function(e){var t=$(n.defaultFilters[e]);(t.is(":checkbox")||t.is(":radio"))&&t.prop("checked","checked")})}),$.isFunction(n.done)&&n.done.call(this,t[0])})}})},$(function(){var t=function(e,t){var n="";$(t.allElement).is(":checked")&&(n=t.itemElements.length+" selected"),$(e).html(n),$("#FindACourseForm").submit()},n=function(e,t){var n=$(t.itemElements).filter(":checked").length,o="";0<n&&(o=n+" selected"),$(e).html(o),$("#AttendanceModeFilter").accordion("testy"),$("#FindACourseForm").submit()};$("#LocationRadiusFilter").accordion(),$("#LocationRadiusFilter input[name='LocationRadius']").on("click",function(){$("#FindACourseForm").submit()}),$("#StudyModeFilter").accordion(),$("#AttendanceModeFilter").accordion(),$("#AttendancePatternFilter").accordion(),$("#QualificationLevelFilter").accordion(),$("#IsDfe1619FundedFilter").accordion(),$("#StudyModeFilter .form-group").multipleChoice({allChange:function(e){t("#StudyModeFilter .accordion-subheading",e)},itemChange:function(e){n("#StudyModeFilter .accordion-subheading",e)}}),$("#AttendanceModeFilter .form-group").multipleChoice({allChange:function(e){t("#AttendanceModeFilter .accordion-subheading",e)},itemChange:function(e){n("#AttendanceModeFilter .accordion-subheading",e)}}),$("#AttendancePatternFilter .form-group").multipleChoice({allChange:function(e){t("#AttendancePatternFilter .accordion-subheading",e)},itemChange:function(e){n("#AttendancePatternFilter .accordion-subheading",e)}}),$("#QualificationLevelFilter .form-group").multipleChoice({allChange:function(e){t("#QualificationLevelFilter .accordion-subheading",e)},itemChange:function(e){n("#QualificationLevelFilter .accordion-subheading",e)}}),$("#IsDfe1619FundedFilter input[name='IsDfe1619Funded']").on("click",function(){$("#FindACourseForm").submit()}),$("#ClearAlFilters").clearAllFilters({filters:["input[name='LocationRadius']","input[name='StudyModes']","input[name='AttendanceModes']","input[name='AttendancePatterns']","input[name='QualificationLevels']","input[name='IsDfe1619Funded']"],defaultFilters:["#LocationRadius10Miles","#IsDfe1619FundedAll"],done:function(){$(".accordion-subheading").html(""),$("#FindACourseForm").submit()}}),$("#SortBy").on("change",function(){$("#FindACourseForm").submit()})}),$(function(){$("#FindACourseForm").addTriggersToJqueryValidate().triggerElementValidationsOnFormValidation(),$("#SubjectKeyword").elementValidation(function(e,t){console.log(["validation ran for element:",e,"and the result was:",t]);var n="error",o=$(e).closest(".form-group");o&&(o.hasClass(n)||!1!==t?o.hasClass(n)&&!0===t&&o.removeClass(n):o.addClass(n))}),$("#Location").elementValidation(function(e,t){console.log(["validation ran for element:",e,"and the result was:",t]);var n="error",o=$(e).closest(".form-group");o&&(o.hasClass(n)||!1!==t?o.hasClass(n)&&!0===t&&o.removeClass(n):o.addClass(n))}),$("#Location").on("blur",function(){var e=$(this).closest(".form-group"),t=$('span[data-valmsg-for="Location"]'),n=0===$(this).val().length;console.log(t),n&&e&&e.hasClass("error")&&(e.removeClass("error"),t.removeClass("field-validation-error").html(""))}),$(function(){$("select").removeAttr("multiple")})}),function(a){var i={init:function(e){var o=a.extend({store:[]},a.fn.journeyTimes.defaults,e);return a(this).each(function(){var e=i.getTableRowElements(o.store),t=a(document.createElement("table"));t.addClass("govuk-table"),a(this).html(""),a(this).append(t);for(var n=0;n<e.length;n++)t.append(e[n])})},getTableRowElement:function(e,t){var n=a(document.createElement("tr")),o=a(document.createElement("td")),i=a(document.createElement("td"));return o.html(e).addClass("govuk-table__cell govuk-body-s"),i.html(t).addClass("govuk-table__cell govuk-body-s"),n.addClass("govuk-table__row"),n.append(o),n.append(i),n[0]},getTableRowElements:function(e){var t=[];if(a.isArray(e))for(var n=0;n<e.length;n++)t.push(i.getTableRowElement(e[n].mode,e[n].duration));return t},onTrigger:function(){}};a.fn.journeyTimes=function(e){if("object"!=typeof e&&e){if(a.isFunction(i[e]))return i[e].apply(this,Array.prototype.slice.call(arguments,1))}else i.init.apply(this,arguments)}}(jQuery),function(i){i.fn.addTriggersToJqueryValidate=function(){return this.each(function(){var e=i(this),t=e.data("validator");if(t&&!e.data("jQueryValidateTriggersAdded")){e.data("jQueryValidateTriggersAdded",!0);var n=t.form;t.form=function(){var e=n.apply(this,arguments),t=this.currentForm;return i(t).trigger(1==e?"formValidationSuccess":"formValidationError",t),i(t).trigger("formValidation",[t,e]),e};var o=t.element;t.element=function(e){var t=o.apply(this,arguments);return i(e).trigger(1==t?"elementValidationSuccess":"elementValidationError",e),i(e).trigger("elementValidation",[e,t]),t}}})},i.fn.extend({triggerElementValidationsOnFormValidation:function(){return this.each(function(){i(this).bind("formValidation",function(e,t){i(t).find("*[data-val=true]").each(function(e,t){i(t).hasClass("input-validation-error")?(i(t).trigger("elementValidationError",t),i(t).trigger("elementValidation",[t,!1])):(i(t).trigger("elementValidationSuccess",t),i(t).trigger("elementValidation",[t,!0]))})})})},formValidation:function(o){return this.each(function(){i(this).bind("formValidation",function(e,t,n){o(t,n)})})},formValidationSuccess:function(n){return this.each(function(){i(this).bind("formValidationSuccess",function(e,t){n(t)})})},formValidationError:function(n){return this.each(function(){i(this).bind("formValidationError",function(e,t){n(t)})})},formValidAndInvalid:function(n,o){return this.each(function(){i(this).bind("formValidationSuccess",function(e,t){n(t)}),i(this).bind("formValidationError",function(e,t){o(t)})})},elementValidation:function(o){return this.each(function(){i(this).bind("elementValidation",function(e,t,n){o(t,n)})})},elementValidationSuccess:function(n){return this.each(function(){i(this).bind("elementValidationSuccess",function(e,t){n(t)})})},elementValidationError:function(n){return this.each(function(){i(this).bind("elementValidationError",function(e,t){n(t)})})},elementValidAndInvalid:function(n,o){return this.each(function(){i(this).bind("elementValidationSuccess",function(e,t){n(t)}),i(this).bind("elementValidationError",function(e,t){o(t)})})}})}(jQuery),$.fn.multipleChoice=function(e){var o=$.extend({allChange:function(){},itemChange:function(){}},$.fn.multipleChoice.defaults,e);return $(this).each(function(){var e=$(this),t=e.find("input:checkbox.multiple-choice-all"),n=e.find("input:checkbox.multiple-choice-item");t.on("change",function(){n.prop("checked",$(this).is(":checked")),$.isFunction(o.allChange)&&o.allChange.call(this,{multipleChoiceElement:e[0],allElement:this,itemElements:n,targetElement:this})}),n.on("change",function(){e.find("input:checkbox.multiple-choice-item:checked").length===n.length?t.prop("checked","checked"):t.prop("checked",""),$.isFunction(o.itemChange)&&o.itemChange.call(this,{multipleChoiceElement:e[0],allElement:t,itemElements:n,targetElement:this})})})},$(function(){var e={speed:100,collapsedHeight:100,heightMargin:25,moreLink:'<a href="#" style="display:block;margin-bottom:20px;">... read more</a>',lessLink:'<a href="#" style="display:block;margin-bottom:20px;">read less</a>'};$("#EntryRequirements").css("overflow","hidden").readmore(e),$("#PriceDescription").css("overflow","hidden").readmore(e),$("#CourseSummary").css("overflow","hidden").readmore(e),$("#EquipmentRequired").css("overflow","hidden").readmore(e),$("#AssessmentMethod").css("overflow","hidden").readmore(e)}),$(function(){var e=sessionStorage.getItem("subjectkeyword"),t=sessionStorage.getItem("quallevel"),n=sessionStorage.getItem("locationpostcode"),o=sessionStorage.getItem("locationradius");function i(e){return null!=e}i(t)&&$("#QualificationLevels").val(t),i(o)&&$("#LocationRadius").val(o),i(e)&&$("#SubjectKeyword").val(decodeURIComponent(e).replace(/\+/g," ")),i(n)&&$("#Location").val(decodeURIComponent(n).replace(/\+/g," "))}),$(function(){$(".twitter").attr("href","https://twitter.com/intent/tweet?original_referer&amp;url="+window.location.href),$(".facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+window.location.href),$(".linkedin").attr("href","https://www.linkedin.com/shareArticle?url="+window.location.href),$(".email").attr("href","mailto:?subject=National Careers Service&body=I wanted to share this post with you from the National Careers Service:%0D%0A"+window.location.href)});