"use strict";$.fn.accordion=function(e){var n=$.extend({startState:"close",openStateClass:"accordion--state-open",closeStateClass:"accordion--state-close",speed:"slow",open:function(){},close:function(){},done:function(){}},$.fn.accordion.defaults,e);return $(this).each(function(){var e=$(this),t=e.children(".accordion-header"),i=t.next(".accordion-panel");"open"===n.startState&&(e.addClass(n.openStateClass),i.show()),"close"===n.startState&&(e.addClass(n.closeStateClass),i.hide()),t.on("click",function(){i.slideToggle(n.speed,function(){e.hasClass(n.openStateClass)?(e.removeClass(n.openStateClass),e.addClass(n.closeStateClass),$.isFunction(n.close)&&n.close.call(this,e[0])):e.hasClass(n.closeStateClass)&&(e.removeClass(n.closeStateClass),e.addClass(n.openStateClass),$.isFunction(n.open)&&n.open.call(this,e[0])),$.isFunction(n.done)&&n.done.call(this,e[0])})})})},$(function(){var o=function(e){var t=$("#SubjectKeyword").val();$("#SubjectKeyword").focus().val("").val(t);var i=$("#course-list"),n=i.find("li.item-hover"),o=i.innerHeight(),l=i.scrollTop(),a=n.outerHeight(!0),c=n.index()+1;"down"===e&&(o<c*a&&i.scrollTop(l+a),a||i.scrollTop(0)),"up"===e&&(i.scrollTop(l-a),a||(i.scrollTop(i[0].scrollHeight),n.removeClass("item-hover"),i.find("li:last-child").addClass("item-hover"))),s()};$("#SubjectKeyword").on("keyup",function(e){var a,t,i,n=e.keyCode||e.which;38!==n&&40!==n&&($("#course-list li").each(function(){$(this).remove()}),13!==n&&(a=$(this).val(),$.ajax({type:"GET",url:"/coursedirectory/autocomplete",contentType:"application/json; charset=utf-8",dataType:"json",data:{parm:a},success:function(e){$.each(e,function(e,t){var i=t.toLowerCase(),n=t.toUpperCase(),o="<strong>"+a.toUpperCase()+"</strong>",l="";l=-1<i.indexOf(a.toLowerCase())?n.replace(a.toUpperCase(),o):n,$("#course-list").append($("<li>",{"data-value":t,html:l}))}),0<$("#course-list").children("li").length?$("#course-list").show():$("#course-list").hide()},failure:function(e){console.log(e.responseText)},error:function(e){console.log(e.responseText)}})),13===n&&$("#course-list").trigger("click")),38!==n&&40!==n||(t=n,i=$("#course-list li.item-hover"),38===t&&i.length&&(i.removeClass("item-hover"),i.prev()&&i.prev().addClass("item-hover"),o("up")),40===t&&(i.length?(i.removeClass("item-hover"),i.next()&&i.next().addClass("item-hover")):$("#course-list li").first().addClass("item-hover"),o("down")))}),$("#SubjectKeyword").on("keydown",function(e){var t=e.keyCode||e.which;13===t&&$("#course-list").is(":visible")&&(e.preventDefault(),$("#Search").focus().click()),9===t&&$("#course-list").hide()}),$("#SubjectKeyword").on("click",function(){$("#course-list").hide()}),$(document).on("click",function(){$("#course-list").hide()}),$("#course-list").on("click",function(){s(),$(this).hide(),$("#SubjectKeyword").focus()});var s=function(){var e=$("#course-list li:hover").attr("data-value"),t=$("#course-list li.item-hover").attr("data-value");t?$("#SubjectKeyword").val(t):$("#SubjectKeyword").val(e)}}),$.fn.clearAllFilters=function(e){var i=$.extend({filters:[],defaultFilters:[],done:function(){}},$.fn.clearAllFilters.defaults,e);return $(this).each(function(){if($.isArray(i.filters)&&0<i.filters.length){var t=$(this);t.on("click",function(e){e.preventDefault(),$(i.filters).each(function(e){var t=$(i.filters[e]);(t.is(":checkbox")||t.is(":radio"))&&t.prop("checked",""),$.isArray(i.defaultFilters)&&0<i.defaultFilters.length&&$(i.defaultFilters).each(function(e){var t=$(i.defaultFilters[e]);(t.is(":checkbox")||t.is(":radio"))&&t.prop("checked","checked")})}),$.isFunction(i.done)&&i.done.call(this,t[0])})}})},$(function(){var t=function(e,t){var i="";$(t.allElement).is(":checked")&&(i=t.itemElements.length+" selected"),$(e).html(i),$("#FindACourseForm").submit()},i=function(e,t){var i=$(t.itemElements).filter(":checked").length,n="";0<i&&(n=i+" selected"),$(e).html(n),$("#FindACourseForm").submit()};$("#LocationRadiusFilter").accordion(),$("#LocationRadiusFilter input[name='LocationRadius']").on("click",function(){$("#FindACourseForm").submit()}),$("#StudyModeFilter").accordion(),$("#AttendanceModeFilter").accordion(),$("#AttendancePatternFilter").accordion(),$("#QualificationLevelFilter").accordion(),$("#Dfe1619FundedFilter").accordion(),$("#StudyModeFilter .form-group").multipleChoice({allChange:function(e){t("#StudyModeFilter .accordion-subheading",e)},itemChange:function(e){i("#StudyModeFilter .accordion-subheading",e)}}),$("#AttendanceModeFilter .form-group").multipleChoice({allChange:function(e){t("#AttendanceModeFilter .accordion-subheading",e)},itemChange:function(e){i("#AttendanceModeFilter .accordion-subheading",e)}}),$("#AttendancePatternFilter .form-group").multipleChoice({allChange:function(e){t("#AttendancePatternFilter .accordion-subheading",e)},itemChange:function(e){i("#AttendancePatternFilter .accordion-subheading",e)}}),$("#QualificationLevelFilter .form-group").multipleChoice({allChange:function(e){t("#QualificationLevelFilter .accordion-subheading",e)},itemChange:function(e){i("#QualificationLevelFilter .accordion-subheading",e)}}),$("#Dfe1619FundedFilter .form-group").multipleChoice({allChange:function(e){t("#Dfe1619FundedFilter .accordion-subheading",e)},itemChange:function(e){i("#Dfe1619FundedFilter .accordion-subheading",e)}}),$("#ClearAlFilters").clearAllFilters({filters:["input[name='LocationRadius']","input[name^='StudyMode']","input[name^='AttendanceMode']","input[name^='AttendancePattern']","input[name^='QualificationLevel']","input[name='Dfe1619Funded']"],defaultFilters:["#LocationRadius10Miles"],done:function(){$(".accordion-subheading").html(""),$("#FindACourseForm").submit()}})}),$(function(){var e={highlight:function(e,t){var i=$(e).closest(".form-group");i&&(i.hasClass(t)||i.addClass(t))},unhighlight:function(e,t){var i=$(e).closest(".form-group");i&&i.hasClass(t)&&i.removeClass(t)}};$.validator.setDefaults(e),$("#FindACourseForm input").on("focusout keyup",function(){$(this).hasClass("input-validation-error")?$.validator.defaults.highlight($(this),$.validator.defaults.errorClass):$.validator.defaults.unhighlight($(this),$.validator.defaults.errorClass)}),$(function(){$("select").removeAttr("multiple")})}),$.fn.multipleChoice=function(e){var n=$.extend({allChange:function(){},itemChange:function(){}},$.fn.multipleChoice.defaults,e);return $(this).each(function(){var e=$(this),t=e.find("input:checkbox.multiple-choice-all"),i=e.find("input:checkbox.multiple-choice-item");t.on("change",function(){i.prop("checked",$(this).is(":checked")),$.isFunction(n.allChange)&&n.allChange.call(this,{multipleChoiceElement:e[0],allElement:this,itemElements:i,targetElement:this})}),i.on("change",function(){e.find("input:checkbox.multiple-choice-item:checked").length===i.length?t.prop("checked","checked"):t.prop("checked",""),$.isFunction(n.itemChange)&&n.itemChange.call(this,{multipleChoiceElement:e[0],allElement:t,itemElements:i,targetElement:this})})})};